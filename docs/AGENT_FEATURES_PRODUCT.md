# Unimail 智能体功能规划（产品视角）

> 从「全球智能体领域顶级产品」视角，定义智能体邮箱应具备的智能体能力与落地优先级。

---

## 一、产品定位与智能体价值

**Unimail** = 邮箱 × 智能体：不是「邮箱里加一个聊天框」，而是**在阅读、整理、撰写、跟进全流程里嵌入智能体**，让收件箱可对话、可执行、可总结。

智能体在此的独特价值：
- **上下文在邮箱内**：发件人、历史邮件、文件夹、星标等天然可作为 agent 的 context，无需用户反复粘贴。
- **动作可落地**：回复、移动、标星、写新邮件、创建待办都可作为 agent 的 tool，一键执行。
- **降低心智负担**：从「自己看完再想要不要回」变成「先看智能体总结/建议，再决定是否深入」。

---

## 二、核心智能体功能矩阵

按用户动线分为：**收件箱与阅读** → **整理与筛选** → **撰写与回复** → **跟进与提醒**。每个环节对应可落地的智能体能力。

---

### 1. 收件箱与阅读（Inbox & Read）

| 功能 | 描述 | 用户价值 | 实现要点 |
|------|------|----------|----------|
| **收件箱每日/每周摘要** | 对当前文件夹（如收件箱）的邮件做智能摘要：谁发了什么、待办/待回复高亮、关键信息提取。 | 5 分钟了解收件箱全貌，减少逐封点开。 | 调用 LLM 对 subject + snippet/body 做摘要；支持「今日」「本周」范围；结果可固定在智能体面板或弹窗。 |
| **单封邮件智能摘要** | 对当前打开的邮件做 1–3 句摘要 + 关键信息（日期、金额、链接、待办项）。 | 长邮件/英文邮件快速抓住重点。 | 以当前 `mail` 的 subject/body 为输入；可带「翻译为中文」选项。 |
| **「这封邮件在说什么？」** | 用户选中一段或整封邮件，问「这段在说什么 / 有没有坑 / 要不要回」。 | 降低理解成本，辅助决策是否回复。 | 上下文 = 当前邮件 + 可选历史会话；回答纯文本，可带「建议回复要点」。 |
| **未读/重要优先视图** | 智能体建议「建议先看这 3 封」并给出理由（紧急、来自重要联系人、含截止日期等）。 | 在列表之上多一层「智能优先级」，而不是只按时间。 | 可用规则 + 轻量模型对 subject/from/snippet 打分；结果以列表或智能体面板展示。 |

---

### 2. 整理与筛选（Organize & Filter）

| 功能 | 描述 | 用户价值 | 实现要点 |
|------|------|----------|----------|
| **智能分类建议** | 根据邮件内容建议「移入 XX 文件夹」或「标星/标为重要」，用户一键确认。 | 减少手动建规则、拖文件夹。 | 输入：邮件 subject/body、现有文件夹列表；输出：建议 folder_id + 简短理由；提供「应用」按钮调用现有移动 API。 |
| **批量操作建议** | 对当前列表（如收件箱 50 封）做「可归档」「可标星」「疑似营销」等批量建议，用户勾选后批量执行。 | 清空收件箱时不再一封封点。 | 对列表做轻量分类/打标签；与现有「移动到」「标星」等 API 组合成 batch 操作。 |
| **自动规则生成** | 用户说「以后来自 XX 的邮件都进项目文件夹」，智能体生成一条可执行的规则（或调用现有规则接口）。 | 把自然语言变成可复用的规则。 | 解析意图 → 规则结构（from/to/subject + folder）；若当前无规则引擎，可先做成「建议 + 一次性执行」。 |

---

### 3. 撰写与回复（Compose & Reply）

| 功能 | 描述 | 用户价值 | 实现要点 |
|------|------|----------|----------|
| **智能写邮件（从零写）** | 用户用自然语言描述「给张三写封邮件，说周三会议改到下午 3 点」，智能体生成 to/subject/body 草稿，可编辑后发送。 | 写邮件像发指令，降低格式与措辞负担。 | 智能体面板输入 → 调用 LLM 生成结构化草稿 → 跳转 /compose 并预填或通过 API 写草稿。 |
| **基于当前邮件写回复** | 在邮件详情页点「智能回复」：根据来信内容生成 1–3 个回复版本（简短/正式/友好等），用户选一个可编辑后发送。 | 回邮件从「想措辞」变成「选版本 + 微调」。 | 上下文 = 当前 mail（含 from/subject/body）；输出多段可选正文；与现有「回复」流程结合，填到正文框或新开 compose。 |
| **润色/扩写/缩短** | 用户在写邮件时选中一段，或整封草稿，请求「更正式」「更简短」「翻译成英文」等。 | 保持用户主体性，只优化表达。 | 当前 body（或选中内容） + 用户指令 → 返回替换文本；在 compose 页用按钮或智能体面板触发。 |
| **模板与风格** | 用户保存「我的风格」或选择模板（如「礼貌拒绝」「会议邀请」），智能体按风格/模板生成初稿。 | 统一对外形象、减少重复劳动。 | 风格/模板存为 prompt 或 few-shot；生成时注入；可与「智能写邮件」共用入口。 |

---

### 4. 跟进与提醒（Follow-up & Remind）

| 功能 | 描述 | 用户价值 | 实现要点 |
|------|------|----------|----------|
| **待办与截止提取** | 从邮件中识别「需要我做什么」「截止时间」，生成待办列表或写入日历（若后续接日历）。 | 邮件里的承诺和 deadline 不遗漏。 | NER + 简单规则或 LLM 抽取 due date / action item；展示在智能体面板或单独「待办」视图。 |
| **「需要回复吗？」提醒** | 智能体标记「可能需回复」的邮件（如问句、请求、未回复的 thread），并在摘要或列表中突出。 | 减少「忘了回」的焦虑。 | 对 subject/body 做二分类或打分；与「未读」结合展示；可做成每日摘要的一部分。 |
| **会话脉络（Thread summary）** | 对同一 thread 的多封往来做摘要：「你和他讨论了什么、当前卡在哪、建议下一步」。 | 长线程快速回顾，便于接手或转交。 | 若当前有 thread_id 或 in-reply-to 等，按 thread 聚合后送 LLM 做摘要；在详情或智能体面板展示。 |

---

## 三、与现有产品的结合方式

- **智能体面板（当前侧边「智能体助手」）**  
  - 作为**统一入口**：摘要、写邮件、回复建议、待办、设置等都在这里用自然语言或快捷指令触发。  
  - 可保留「即将上线」的占位，首期先上 1–2 个能力（如收件箱摘要 + 智能回复），再逐步扩展。

- **上下文注入**  
  - 列表页：当前文件夹、选中的 mail（若有）。  
  - 详情页：当前 mail 全文、from/to/subject。  
  - 写邮件页：to/subject/body、可选「回复哪封」的原文。  
  - 这样智能体无需用户复制粘贴，即可「知道当前在看什么、在写什么」。

- **动作与现有 API 对齐**  
  - 回复、移动、标星、删除、写草稿、发送等，都已有或可扩展 API；智能体以 **tool calling** 形式调用这些接口，用户确认后再执行（敏感操作可二次确认）。

---

## 四、推荐落地优先级（MVP → 完整版）

| 阶段 | 能力 | 理由 |
|------|------|------|
| **P0（首版必上）** | 收件箱摘要 + 单封摘要 + 智能回复（基于当前邮件） | 直接对应「写邮件、总结收件箱、智能回复」的已有文案，用户感知最强、复用同一套「当前邮件」上下文。 |
| **P1** | 智能写邮件（从零）、润色/扩写/缩短 | 与 compose 强绑定，提升撰写效率；技术可复用同一 LLM + 结构化输出。 |
| **P2** | 智能分类/移动建议、待办与截止提取 | 需要更多与文件夹/规则的集成，或轻量任务结构；差异化明显。 |
| **P3** | 批量操作建议、自动规则生成、会话脉络、需要回复吗 | 依赖更多数据与规则，或线程模型，可作长期迭代。 |

---

## 五、技术侧简要提示（便于与工程师对齐）

- **模型**：摘要、回复、写邮件、润色均可用同一 LLM（或同一推理服务）；按 token 控制成本（如只送 subject + body 前 N 字）。
- **上下文**：严格限制「当前文件夹 + 当前邮件 + 最近几条会话」等，避免超长 context；摘要可先对列表做 snippet 级处理再喂给模型。
- **安全与合规**：敏感操作（发邮件、批量移动）必须用户显式确认；可考虑「仅生成草稿不直接发」作为默认策略。
- **体验**：加载中要有骨架或明确 loading；失败时给「重试」或降级到「仅展示原文」，避免白屏或卡死。

---

## 六、一句话总结

**Unimail 的智能体，应让「收件箱可被总结、邮件可被理解、回复可被建议、撰写可被辅助、待办可被提取」，并与现有阅读/整理/撰写流程深度结合，而不是一个孤立的聊天窗口。** 优先实现「收件箱摘要 + 单封摘要 + 智能回复」，即可在用户心中建立「智能体邮箱」的清晰认知，再按上表逐步扩展。
